<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Forced Desktop Viewport -->
    <meta name="viewport" content="width=1280, initial-scale=1">
    <title>NetCard Architect Pro | Desktop Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --card-width: 1050px;
            --card-height: 600px;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #050505;
            color: #e2e8f0;
            /* Force horizontal scroll instead of responsive stacking */
            min-width: 1280px;
            overflow-x: auto;
        }
        .mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom scrollbar for dark theme */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        .card-container {
            perspective: 1000px;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        
        canvas { display: none; } /* Hidden canvas for high-res export */

        .color-swatch {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        .color-swatch:hover { transform: scale(1.1); }
        .color-swatch.active { border-color: white; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- Top Navigation Bar -->
    <nav class="h-16 border-b border-white/5 bg-black flex items-center justify-between px-8 shrink-0 z-50">
        <div class="flex items-center gap-3">
            <div class="w-9 h-9 bg-blue-600 rounded-lg flex items-center justify-center shadow-[0_0_15px_rgba(37,99,235,0.4)]">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-white"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>
            </div>
            <h1 class="font-black text-xl tracking-tighter">NETCARD<span class="text-blue-500">ARCHITECT</span> <span class="text-[10px] bg-white/10 px-2 py-1 rounded text-gray-400 font-mono ml-2">v4.0_DESKTOP</span></h1>
        </div>

        <div class="flex items-center gap-6">
            <div class="hidden lg:flex items-center gap-4 text-[10px] font-bold text-gray-500 uppercase tracking-widest">
                <span class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> Engine Live</span>
                <span class="w-px h-3 bg-white/10"></span>
                <span>300 DPI Rendering</span>
            </div>
            <button id="exportBtn" class="bg-white text-black hover:bg-blue-500 hover:text-white px-6 py-2.5 rounded-full font-bold text-xs transition-all flex items-center gap-2 active:scale-95 shadow-xl">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                EXPORT FOR PRODUCTION
            </button>
        </div>
    </nav>

    <div class="flex flex-1 overflow-hidden">
        <!-- Sidebar: Configuration -->
        <aside class="w-[400px] bg-[#080808] border-r border-white/5 overflow-y-auto p-8 scrollbar-hide shrink-0">
            <div class="space-y-10">
                
                <!-- Layout Mode -->
                <section>
                    <label class="text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-4 block">1. Structural Logic</label>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="setOrientation('horizontal')" id="btn-horiz" class="p-4 rounded-xl border-2 border-blue-600 bg-blue-600/10 text-left transition-all group">
                            <div class="w-8 h-5 border-2 border-current rounded-sm mb-2"></div>
                            <p class="text-xs font-bold text-white">Horizontal</p>
                            <p class="text-[9px] text-gray-500">3.5" x 2.0" Standard</p>
                        </button>
                        <button onclick="setOrientation('vertical')" id="btn-vert" class="p-4 rounded-xl border-2 border-white/5 bg-transparent text-left hover:border-white/20 transition-all group">
                            <div class="w-5 h-8 border-2 border-current rounded-sm mb-2"></div>
                            <p class="text-xs font-bold text-gray-400">Vertical</p>
                            <p class="text-[9px] text-gray-600">2.0" x 3.5" Portrait</p>
                        </button>
                    </div>
                </section>

                <!-- Design Style -->
                <section>
                    <label class="text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-4 block">2. Design Style</label>
                    <div class="space-y-2">
                        <button onclick="setStyle('modern')" class="style-btn w-full p-4 rounded-xl border-2 border-blue-600 bg-blue-600/10 text-left flex justify-between items-center group">
                            <div>
                                <p class="text-xs font-bold text-white">The Neo-Modernist</p>
                                <p class="text-[9px] text-gray-500">Asymmetrical grid with brand shard</p>
                            </div>
                            <div class="w-2 h-2 rounded-full bg-blue-500"></div>
                        </button>
                        <button onclick="setStyle('minimal')" class="style-btn w-full p-4 rounded-xl border-2 border-white/5 hover:border-white/10 text-left flex justify-between items-center transition-all">
                            <div>
                                <p class="text-xs font-bold text-gray-400">Swiss Brutalist</p>
                                <p class="text-[9px] text-gray-600">Centric, high-readability typography</p>
                            </div>
                        </button>
                        <button onclick="setStyle('tech')" class="style-btn w-full p-4 rounded-xl border-2 border-white/5 hover:border-white/10 text-left flex justify-between items-center transition-all">
                            <div>
                                <p class="text-xs font-bold text-gray-400">Developer Identity</p>
                                <p class="text-[9px] text-gray-600">High-contrast, terminal-inspired</p>
                            </div>
                        </button>
                    </div>
                </section>

                <!-- Brand Colors -->
                <section>
                    <label class="text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-4 block">3. Brand Palette</label>
                    <div class="grid grid-cols-5 gap-4 bg-white/5 p-4 rounded-2xl border border-white/5">
                        <div class="flex flex-col items-center gap-2">
                            <input type="color" id="color-bg" value="#0a0a0a" oninput="updateColors()" class="w-8 h-8 bg-transparent cursor-pointer rounded-full border-none">
                            <span class="text-[8px] font-bold text-gray-600">BASE</span>
                        </div>
                        <div class="flex flex-col items-center gap-2">
                            <input type="color" id="color-primary" value="#3b82f6" oninput="updateColors()" class="w-8 h-8 bg-transparent cursor-pointer rounded-full border-none">
                            <span class="text-[8px] font-bold text-gray-600">PRIME</span>
                        </div>
                        <div class="flex flex-col items-center gap-2">
                            <input type="color" id="color-text" value="#ffffff" oninput="updateColors()" class="w-8 h-8 bg-transparent cursor-pointer rounded-full border-none">
                            <span class="text-[8px] font-bold text-gray-600">TXT</span>
                        </div>
                    </div>
                </section>

                <!-- Identity Fields -->
                <section>
                    <label class="text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-4 block">4. Data Nodes</label>
                    <div class="space-y-3">
                        <input type="text" id="in-name" oninput="updateData()" placeholder="Full Name" value="CASPIAN VANCE" class="w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-xs outline-none focus:border-blue-500 transition-all">
                        <input type="text" id="in-title" oninput="updateData()" placeholder="Job Title" value="Principal Software Engineer" class="w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-xs outline-none focus:border-blue-500 transition-all">
                        <input type="text" id="in-company" oninput="updateData()" placeholder="Company" value="GITHUB ECOSYSTEM" class="w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-xs outline-none focus:border-blue-500 transition-all">
                        <input type="text" id="in-email" oninput="updateData()" placeholder="Email" value="vance.c@github.com" class="w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-xs outline-none focus:border-blue-500 transition-all">
                        <input type="text" id="in-qr" oninput="updateData()" placeholder="QR Link (LinkedIn/GitHub)" value="https://github.com/vance-codes" class="w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-[10px] font-mono outline-none focus:border-blue-500 transition-all text-blue-400">
                    </div>
                </section>

                <!-- Profile Pic -->
                <section>
                    <label class="text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-4 block">5. Brand Asset</label>
                    <div class="flex gap-4">
                        <label class="flex-1 border-2 border-dashed border-white/10 rounded-2xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-blue-500/50 hover:bg-blue-500/5 transition-all group">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-500 group-hover:text-blue-500 mb-2"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
                            <span class="text-[9px] font-bold text-gray-600">UPLOAD LOGO/PFP</span>
                            <input type="file" id="imgUpload" class="hidden" accept="image/*">
                        </label>
                        <div id="imgPreview" class="w-20 h-20 bg-white/5 rounded-2xl border border-white/10 hidden overflow-hidden relative group">
                            <img id="pfpImg" class="w-full h-full object-cover">
                            <button onclick="removeImage()" class="absolute inset-0 bg-red-600/80 items-center justify-center hidden group-hover:flex">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </aside>

        <!-- Main Workspace -->
        <main class="flex-1 bg-black relative flex flex-col items-center justify-center p-12 overflow-hidden shadow-inner">
            
            <!-- Side Toggle -->
            <div class="absolute top-10 left-1/2 -translate-x-1/2 flex bg-white/5 p-1.5 rounded-2xl border border-white/10 z-20">
                <button onclick="setView('front')" id="view-front" class="px-8 py-2 rounded-xl text-[10px] font-black transition-all bg-blue-600 text-white shadow-xl">FRONT SIDE</button>
                <button onclick="setView('back')" id="view-back" class="px-8 py-2 rounded-xl text-[10px] font-black transition-all text-gray-500 hover:text-gray-200">BACK SIDE</button>
            </div>

            <!-- The Designer Canvas -->
            <div id="card-stage" class="transition-all duration-700 ease-[cubic-bezier(0.23,1,0.32,1)] w-full max-w-[850px] aspect-[1050/600]">
                <svg id="main-svg" viewBox="0 0 1050 600" class="w-full h-full shadow-[0_50px_100px_-20px_rgba(0,0,0,0.8)] rounded-sm border border-white/5"></svg>
            </div>

            <!-- Status HUD -->
            <div class="mt-16 flex gap-12 text-gray-700">
                <div class="flex items-center gap-2 text-[10px] font-black tracking-widest">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" class="text-blue-500"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> 300DPI_QUAL
                </div>
                <div class="flex items-center gap-2 text-[10px] font-black tracking-widest">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" class="text-emerald-500"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><path d="M7 7h1v1H7z"/><path d="M7 16h1v1H7z"/><path d="M16 7h1v1h-1z"/><path d="M16 16h1v1h-1z"/></svg> DYNAMIC_QR
                </div>
                <div class="flex items-center gap-2 text-[10px] font-black tracking-widest">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" class="text-amber-500"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> AUTO_SYNC
                </div>
            </div>

            <!-- Background Ambient Glows -->
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full pointer-events-none opacity-20">
                <div class="absolute top-0 left-0 w-[600px] h-[600px] bg-blue-600 rounded-full blur-[200px]"></div>
                <div class="absolute bottom-0 right-0 w-[600px] h-[600px] bg-purple-600 rounded-full blur-[200px]"></div>
            </div>
        </main>
    </div>

    <!-- Hidden Canvas for Export -->
    <canvas id="exportCanvas"></canvas>

    <script>
        // --- App State ---
        let orientation = 'horizontal';
        let currentStyle = 'modern';
        let currentView = 'front';
        let profileImage = null;
        
        const colors = { bg: '#0a0a0a', primary: '#3b82f6', text: '#ffffff' };
        const data = {
            name: 'CASPIAN VANCE',
            title: 'Principal Software Engineer',
            company: 'GITHUB ECOSYSTEM',
            email: 'vance.c@github.com',
            qr: 'https://github.com/vance-codes'
        };

        // --- Core Functions ---
        function updateColors() {
            colors.bg = document.getElementById('color-bg').value;
            colors.primary = document.getElementById('color-primary').value;
            colors.text = document.getElementById('color-text').value;
            render();
        }

        function updateData() {
            data.name = document.getElementById('in-name').value;
            data.title = document.getElementById('in-title').value;
            data.company = document.getElementById('in-company').value;
            data.email = document.getElementById('in-email').value;
            data.qr = document.getElementById('in-qr').value;
            render();
        }

        function setOrientation(mode) {
            orientation = mode;
            const stage = document.getElementById('card-stage');
            const svg = document.getElementById('main-svg');
            
            if (mode === 'horizontal') {
                stage.style.maxWidth = '850px';
                stage.style.maxHeight = 'none';
                stage.style.aspectRatio = '1050 / 600';
                svg.setAttribute('viewBox', '0 0 1050 600');
                document.getElementById('btn-horiz').className = 'p-4 rounded-xl border-2 border-blue-600 bg-blue-600/10 text-left transition-all';
                document.getElementById('btn-vert').className = 'p-4 rounded-xl border-2 border-white/5 bg-transparent text-left hover:border-white/20 transition-all';
            } else {
                stage.style.maxWidth = 'none';
                stage.style.maxHeight = '750px';
                stage.style.aspectRatio = '600 / 1050';
                svg.setAttribute('viewBox', '0 0 600 1050');
                document.getElementById('btn-vert').className = 'p-4 rounded-xl border-2 border-blue-600 bg-blue-600/10 text-left transition-all';
                document.getElementById('btn-horiz').className = 'p-4 rounded-xl border-2 border-white/5 bg-transparent text-left hover:border-white/20 transition-all';
            }
            render();
        }

        function setStyle(s) {
            currentStyle = s;
            const buttons = document.querySelectorAll('.style-btn');
            buttons.forEach(btn => {
                btn.className = 'style-btn w-full p-4 rounded-xl border-2 border-white/5 hover:border-white/10 text-left flex justify-between items-center transition-all';
                const p = btn.querySelector('p');
                p.classList.remove('text-white');
                p.classList.add('text-gray-400');
                if(btn.querySelector('.bg-blue-500')) btn.querySelector('.bg-blue-500').remove();
            });

            const active = event.currentTarget;
            active.className = 'style-btn w-full p-4 rounded-xl border-2 border-blue-600 bg-blue-600/10 text-left flex justify-between items-center transition-all';
            active.querySelector('p').className = 'text-xs font-bold text-white';
            active.innerHTML += '<div class="w-2 h-2 rounded-full bg-blue-500"></div>';
            
            render();
        }

        function setView(v) {
            currentView = v;
            document.getElementById('view-front').className = v === 'front' ? 'px-8 py-2 rounded-xl text-[10px] font-black transition-all bg-blue-600 text-white' : 'px-8 py-2 rounded-xl text-[10px] font-black transition-all text-gray-500 hover:text-gray-200';
            document.getElementById('view-back').className = v === 'back' ? 'px-8 py-2 rounded-xl text-[10px] font-black transition-all bg-blue-600 text-white' : 'px-8 py-2 rounded-xl text-[10px] font-black transition-all text-gray-500 hover:text-gray-200';
            render();
        }

        // --- Image Handling ---
        document.getElementById('imgUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    profileImage = event.target.result;
                    document.getElementById('pfpImg').src = profileImage;
                    document.getElementById('imgPreview').classList.remove('hidden');
                    render();
                }
                reader.readAsDataURL(file);
            }
        });

        function removeImage() {
            profileImage = null;
            document.getElementById('imgPreview').classList.add('hidden');
            render();
        }

        // --- The Render Engine ---
        function render() {
            const svg = document.getElementById('main-svg');
            const isH = orientation === 'horizontal';
            const W = isH ? 1050 : 600;
            const H = isH ? 600 : 1050;

            // Generate working QR URL (using Google Charts API)
            // It colors the QR pixels using the Brand Primary color
            const qrSafeColor = colors.primary.replace('#', '');
            const qrBgColor = colors.bg.replace('#', '');
            const qrUrl = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${encodeURIComponent(data.qr)}&chco=${qrSafeColor}&chld=L|0`;

            let content = `<rect width="${W}" height="${H}" fill="${colors.bg}" />`;

            if (currentView === 'front') {
                if (currentStyle === 'modern') {
                    content += `
                        <path d="M ${W*0.6} 0 L ${W} 0 L ${W} ${H} L ${W*0.4} ${H} Z" fill="${colors.primary}" fill-opacity="0.05" />
                        <rect x="${W-40}" y="0" width="40" height="${H}" fill="${colors.primary}" />
                        ${profileImage ? `
                            <clipPath id="circleClip"><circle cx="${isH ? 120 : W/2}" cy="${isH ? 120 : 150}" r="80" /></clipPath>
                            <image href="${profileImage}" x="${(isH ? 120 : W/2)-80}" y="${(isH ? 120 : 150)-80}" width="160" height="160" clip-path="url(#circleClip)" preserveAspectRatio="xMidYMid slice" />
                        ` : `
                            <circle cx="${isH ? 120 : W/2}" cy="${isH ? 120 : 150}" r="80" fill="${colors.primary}" fill-opacity="0.1" />
                        `}
                        <g transform="translate(${isH ? 80 : 80}, ${isH ? 320 : 420})">
                            <text font-size="64" font-weight="900" fill="${colors.text}" font-family="Inter">${data.name}</text>
                            <text y="50" font-size="24" font-weight="600" fill="${colors.primary}" letter-spacing="4" font-family="Inter">${data.title.toUpperCase()}</text>
                            <text y="120" font-size="18" fill="${colors.text}" fill-opacity="0.6" font-family="monospace">${data.email}</text>
                        </g>
                        <g transform="translate(${W-180}, ${H-180})">
                            <rect width="120" height="120" fill="white" rx="10" />
                            <image href="${qrUrl}" x="10" y="10" width="100" height="100" />
                        </g>
                    `;
                } else if (currentStyle === 'minimal') {
                    content += `
                        <rect x="${W/2 - 250}" y="${H/2 - 100}" width="500" height="200" fill="none" stroke="${colors.primary}" stroke-width="1" stroke-opacity="0.2" />
                        <text x="${W/2}" y="${H/2}" text-anchor="middle" font-size="80" font-weight="900" fill="${colors.text}" font-family="Inter">${data.name}</text>
                        <text x="${W/2}" y="${H/2 + 50}" text-anchor="middle" font-size="20" fill="${colors.primary}" letter-spacing="10" font-family="Inter">${data.title.toUpperCase()}</text>
                        <g transform="translate(${W/2 - 50}, ${H-160})">
                            <rect width="100" height="100" fill="white" rx="8" />
                            <image href="${qrUrl}" x="5" y="5" width="90" height="90" />
                        </g>
                    `;
                } else if (currentStyle === 'tech') {
                    content += `
                        <rect width="${W}" height="40" fill="${colors.primary}" fill-opacity="0.1" />
                        <text x="20" y="25" font-size="14" font-family="monospace" fill="${colors.primary}">USER_PROFILE // ${data.name.replace(' ', '_')}</text>
                        <g transform="translate(60, ${H/2 - 80})">
                            <text font-size="120" font-weight="900" fill="${colors.text}" font-family="Inter" opacity="0.03" y="100">${data.company}</text>
                            <text font-size="72" font-weight="900" fill="${colors.text}" font-family="Inter">${data.name}</text>
                            <text y="50" font-size="24" fill="${colors.primary}" font-family="monospace">&gt; ${data.title}</text>
                        </g>
                        <rect x="60" y="${H-100}" width="${W-120}" height="1" fill="${colors.primary}" fill-opacity="0.3" />
                        <text x="60" y="${H-60}" font-size="16" font-family="monospace" fill="${colors.text}" opacity="0.5">${data.email}</text>
                        <g transform="translate(${W-140}, ${H-140})">
                            <rect width="80" height="80" fill="white" rx="4" />
                            <image href="${qrUrl}" x="5" y="5" width="70" height="70" />
                        </g>
                    `;
                }
            } else {
                // Back View
                content += `
                    <circle cx="${W/2}" cy="${H/2}" r="150" fill="${colors.primary}" fill-opacity="0.05" />
                    <text x="${W/2}" y="${H/2}" text-anchor="middle" font-size="82" font-weight="900" fill="${colors.text}" font-family="Inter">${data.company}</text>
                    <text x="${W/2}" y="${H/2 + 60}" text-anchor="middle" font-size="16" fill="${colors.primary}" letter-spacing="12" font-family="Inter">ENGINEERED BY GITHUB</text>
                    <rect x="${W/2 - 40}" y="${H-80}" width="80" height="4" fill="${colors.primary}" />
                `;
            }

            svg.innerHTML = content;
        }

        // --- Export Engine ---
        document.getElementById('exportBtn').addEventListener('click', function() {
            const btn = this;
            btn.innerHTML = 'PROCESSING...';
            btn.disabled = true;

            const svg = document.getElementById('main-svg');
            const svgData = new XMLSerializer().serializeToString(svg);
            const canvas = document.getElementById('exportCanvas');
            const ctx = canvas.getContext('2d');
            
            // Set High-Res dimensions (4x)
            const scale = 4;
            const isH = orientation === 'horizontal';
            canvas.width = (isH ? 1050 : 600) * scale;
            canvas.height = (isH ? 600 : 1050) * scale;

            const img = new Image();
            const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
            const url = URL.createObjectURL(svgBlob);

            img.onload = function() {
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                const pngUrl = canvas.toDataURL('image/png');
                const downloadLink = document.createElement('a');
                downloadLink.download = `NETCARD_${data.name.replace(' ', '_')}_${currentView}.png`;
                downloadLink.href = pngUrl;
                downloadLink.click();
                URL.revokeObjectURL(url);
                
                btn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg> EXPORT FOR PRODUCTION';
                btn.disabled = false;
            };
            img.src = url;
        });

        // Initial Render
        window.onload = render;
    </script>
</body>
</html>


